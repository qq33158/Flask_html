import joblib
import numpy as np
class model():
    def add(s,x,y,z):
        pipe_lr = joblib.load('myapp/xgboost_model.pkl')
        zipcode = int(str(s).replace("{'",'').replace("'}",''))
        x = int(str(x).replace("{'",'').replace("'}",''))
        y = int(str(y).replace("{'",'').replace("'}",''))
        z = int(str(z).replace("{Decimal('",'').replace("')}",''))
        if zipcode == 98010:
            list1 = [[2021,zipcode,x,y,z,4.072621035058431,0.0,4.434891485809683,4.889816360601002,4.976627712854758,1.0,11366.841402337228,4213.387312186978,374065.5901502504,334.0,2017.0,15.049999999999661,85398.0,39.0,810.0,1151.0,99.0,571.0,840.0,356.0,85.0,67.8999999999997,8.600000000000193,15.600000000000046,5.600000000000103,5436.0,220.0,0.016556291389999773,0.04047093450999929,0.02557027226000055,0.01674025017999983,0.02354672553000013,40.69999999999939,2.7199999999999402,106438.0,29.806789649415705,0.08700000000000221]]
        elif zipcode == 98029:    
            list1 = [[2021,zipcode,x,y,z,26.404444444444444,20.608888888888888,7.398518518518519,7.069629629629629,0.005925925925925926,16.0,12499.675555555556,8876.56962962963,845825.2288888888,2719.0,10222.0,8.950000000000147,99974.0,0.41000000000000786,460.0,10562.0,948.0,1837.0,4667.0,2840.0,0.27594247960000334,28.0,9.0,40.0,16.0,26697.0,1199.0,0.019328014380000157,0.04491141327000033,0.2492414878000029,0.007528935835000005,0.020077162229999692,35.400000000000865,2.5100000000000815,120533.0,30.113421481481485,0.10099999999999926]]
        elif zipcode == 98075:      
            list1 = [[2021,zipcode,x,y,z,11.422396856581532,11.245579567779961,8.396201702685003,7.58218729535036,7.974459724950884,16.0,16127.71643745907,11329.620825147347,1029858.557956778,2185.0,7005.0,9.479999999999691,142926.0,55.0,1487.0,5617.0,297.0,576.0,2701.0,3195.0,82.69999999999797,22.0,6.0,43.0,28.0,22272.0,794.0,0.013065732760000073,0.03565014368000112,0.21677442530000204,0.005657327586000155,0.013424928159999525,37.80000000000096,3.070000000000026,171840.0,29.944419122462357,0.10099999999999924]]
        elif zipcode == 98092: 
            list1 = [[2021,zipcode,x,y,z,16.2036866359447,15.000460829493088,5.244700460829493,3.411520737327189,3.476036866359447,18.0,35909.9801843318,6466.417050691244,461938.7276497696,892.0,14935.0,44.630000000000734,70877.0,38.0,4288.0,11344.0,1934.0,4458.0,6690.0,1769.0,88.79999999999768,58.0,11.0,21.0,7.0,45248.0,3259.0,0.04740541018000142,0.0720252828899981,0.10915399579999986,0.04884193777000261,0.04857673266999996,35.09999999999992,2.8100000000000995,88529.0,29.916977880184298,0.1009999999999992]]
        else: 
            list1 = [[2021,zipcode,x,y,z,58.919735599622285,49.83663833805477,4.3201133144475925,5.325779036827195,3.604343720491029,60.0,5645.370160528801,5187.921624173749,487497.65627950896,4161.0,9990.0,5.5,57875.0,31.0,6027.0,4464.0,2277.0,2726.0,3825.0,855.0,77.89999999999962,59.19999999999887,9.299999999999983,24.200000000000454,7.300000000000125,28152.0,3467.0,0.11576442170000319,0.12315288429999849,0.18801506110000274,0.029909065079999138,0.0820900824100008,34.5,2.539999999999972,65781.0,29.75452691218132,0.10250000000000213]]
        list1 = np.array(list1)
        res = list(pipe_lr.predict(list1))
        for i in res:
            res1 = round(i/z,2)
        res1 = str(res1)
        return res[0],res1